# MCP Server for Kubernetes Support Bundles

A Model Context Protocol (MCP) server that enables AI models to interact with Kubernetes support bundles generated by the [Troubleshoot](https://troubleshoot.sh/) tool.

## Features

- Initialize support bundles from local files or remote URLs
- Execute kubectl commands against the bundle's emulated Kubernetes API server
- Explore and search log files within the bundle
- Analyze cluster state and diagnose issues

## Installation

### Development Installation

```bash
# Clone the repository
git clone https://github.com/your-username/mcp-server-troubleshoot.git
cd mcp-server-troubleshoot

# Install with development dependencies
uv pip install -e ".[dev]"
```

### Docker Installation

The MCP server can also be run as a Docker container:

```bash
# Build the Docker image
./build.sh

# Run the container
./run.sh
```

For detailed Docker usage instructions, see [DOCKER.md](DOCKER.md).

## Usage

### Command Line

```bash
# Start the MCP server
mcp-server-troubleshoot

# With verbose logging
mcp-server-troubleshoot --verbose
```

### MCP Inspector

You can test the server using the MCP Inspector tool:

```bash
mcp-inspector | mcp-server-troubleshoot
```

## Testing

```bash
# Run all tests
pytest

# Run with verbose output
pytest -v
```

## Development

### Project Structure

```
mcp-server-troubleshoot/
├── src/
│   └── mcp_server_troubleshoot/
│       ├── __init__.py
│       ├── __main__.py
│       ├── server.py
│       ├── bundle.py
│       ├── kubectl.py
│       └── files.py
├── tests/
│   ├── __init__.py
│   ├── test_server.py
│   ├── test_bundle.py
│   ├── test_kubectl.py
│   └── test_files.py
├── Dockerfile
├── build.sh
├── run.sh
├── pyproject.toml
├── DOCKER.md
└── README.md
```

### Code Style

Code formatting is done using Black and Ruff:

```bash
# Format code with Black
black .

# Lint code with Ruff
ruff check .
```

## License

MIT